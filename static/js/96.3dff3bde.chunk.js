"use strict";(self.webpackChunkproduct_ecommerce=self.webpackChunkproduct_ecommerce||[]).push([[96],{6096:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var l=s(5043);const c=s(6213).A.create({baseURL:"https://api.escuelajs.co/api/v1",headers:{Accept:"application/json"}});var i=s(4282),n=s(8628),r=s(2557),a=s(540),o=s(579);const d=function(e){let{images:t}=e;const[s,c]=(0,l.useState)(0);return(0,o.jsx)(a.A,{activeIndex:s,onSelect:e=>{c(e)},children:t&&t.length>0&&t.map(((e,t)=>(0,o.jsx)(a.A.Item,{children:(0,o.jsx)("img",{className:"d-block w-100",src:e.replace(/^[\[\\"']+|[\]\\"']+$|\\\"/g,""),alt:`product image ${t}`})},t)))})};var u=s(7417);const h=function(e){let{show:t,onHide:s,id:n}=e;const[a,h]=(0,l.useState)(null),[x,m]=(0,l.useState)(!1),[p,j]=(0,l.useState)();return(0,l.useEffect)((()=>{(async()=>{if(t){m(!0),h(null);try{const e=await(async e=>{try{return(await c.get(`/products/${e}`)).data}catch(a){var t,s;throw new Error((null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||`Failed to fetch product with ID ${e}.`)}})(n);j(e)}catch(e){h(e.message)}finally{m(!1)}}})()}),[t,n]),(0,o.jsx)(r.A,{show:t,onHide:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,className:"custom-modal",children:x?(0,o.jsx)(u.A,{animation:"border",role:"status",children:(0,o.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d,{images:null===p||void 0===p?void 0:p.images}),(0,o.jsxs)(r.A.Body,{children:[(0,o.jsx)("h4",{children:null===p||void 0===p?void 0:p.title}),(0,o.jsx)("p",{children:null===p||void 0===p?void 0:p.description}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(i.A,{onClick:s,children:"Close"})})]})]})})};const x=function(e){let{product:t}=e;const[s,c]=l.useState(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.A,{className:"product-card",children:[(0,o.jsx)(n.A.Img,{variant:"top",src:t.images[0].replace(/^[\[\\"']+|[\]\\"']+$|\\\"/g,""),alt:t.title,onError:e=>{e.target.src="https://i.imgur.com/QkIa5tT.jpeg",e.onerror=null}}),(0,o.jsxs)(n.A.Body,{className:"text-center",children:[(0,o.jsx)(n.A.Title,{children:t.title}),(0,o.jsxs)(n.A.Text,{children:[t.description.slice(0,100),"..."]}),(0,o.jsxs)(n.A.Text,{children:[(0,o.jsx)("strong",{children:"Price: "}),"$",t.price]}),(0,o.jsx)(i.A,{variant:"primary",onClick:()=>c(!0),children:"View Details"})]})]}),(0,o.jsx)(h,{show:s,onHide:()=>c(!1),id:t.id})]})};var m=s(3519),p=s(1072),j=s(8602),v=s(9853);const g=e=>{let{setCategory:t,setPriceRange:s,setSortOption:l,category:c,priceRange:i,sortOption:n}=e;return(0,o.jsxs)("div",{className:"filters d-flex flex-column p-3",children:[(0,o.jsx)("h5",{className:"fw-bold text-muted",children:"Filters"}),(0,o.jsxs)(v.A.Label,{className:"fs-6 fw-bold text-muted",children:["Category",(0,o.jsxs)(v.A.Select,{size:"sm",className:"m-2",onChange:e=>t(e.target.value),value:c,children:[(0,o.jsx)("option",{value:"",children:"All"}),(0,o.jsx)("option",{value:"Electronics",children:"Electronics"}),(0,o.jsx)("option",{value:"Clothes",children:"Clothes"}),(0,o.jsx)("option",{value:"Shoes",children:"Shoes"}),(0,o.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"})]})]}),(0,o.jsxs)(v.A.Label,{className:"fs-6 fw-bold text-muted",children:["Price",(0,o.jsxs)(v.A.Select,{size:"sm",className:"m-2",onChange:e=>{const t=e.target.value;"all"===t?s([0,1/0]):"low"===t?s([0,50]):"medium"===t?s([50,200]):"high"===t&&s([200,1/0])},value:0===i[0]&&i[1]===1/0?"all":0===i[0]?"low":50===i[0]?"medium":"high",children:[(0,o.jsx)("option",{value:"all",children:"All"}),(0,o.jsx)("option",{value:"low",children:"Under 50"}),(0,o.jsx)("option",{value:"medium",children:"$50 - $200"}),(0,o.jsx)("option",{value:"high",children:"$200 & above"})]})]}),(0,o.jsxs)(v.A.Label,{className:"fs-6 fw-bold text-muted",children:["Sort By",(0,o.jsxs)(v.A.Select,{size:"sm",className:"m-2",onChange:e=>l(e.target.value),value:n,children:[(0,o.jsx)("option",{value:"",children:"None"}),(0,o.jsx)("option",{value:"price-asc",children:"Price: Low to High"}),(0,o.jsx)("option",{value:"price-desc",children:"Price: High to Low"})]})]})]})},f=()=>{const[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(null),[n,r]=(0,l.useState)(!1),[a,d]=(0,l.useState)(!0),[h,v]=(0,l.useState)(1),[f,w]=(0,l.useState)([]),[A,y]=(0,l.useState)(""),[S,N]=(0,l.useState)([0,1/0]),[b,C]=(0,l.useState)(""),E=(0,l.useRef)(!1),$=(0,l.useCallback)((async()=>{if(!n&&a){r(!0),i(null);try{const e=await(async(e,t)=>{try{return(await c.get(`/products?limit=${e}&offset=${t}`)).data}catch(s){var l,i;throw new Error((null===(l=s.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||"Failed to fetch products.")}})(12,h);t((t=>[...t,...e])),e.length<12&&d(!1)}catch(e){i(e.message)}finally{r(!1),v((e=>e+12))}}}),[n,a,h]);(0,l.useEffect)((()=>{E.current||($(),E.current=!0)}),[]);const k=(0,l.useCallback)((()=>{const{scrollTop:e,scrollHeight:t,clientHeight:s}=document.documentElement;t-e<=s+100&&$()}),[$]);return(0,l.useEffect)((()=>(window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k))),[k]),(0,l.useEffect)((()=>{let t=[...e];A&&(t=t.filter((e=>e.category.name===A))),t=t.filter((e=>e.price>=S[0]&&e.price<=S[1])),"price-asc"===b?t.sort(((e,t)=>e.price-t.price)):"price-desc"===b&&t.sort(((e,t)=>t.price-e.price)),w(t)}),[e,A,S,b]),(0,o.jsx)(m.A,{children:(0,o.jsxs)(p.A,{children:[(0,o.jsx)(j.A,{xs:12,md:3,children:(0,o.jsx)(g,{setCategory:y,setPriceRange:N,setSortOption:C,category:A,priceRange:S,sortOption:b})}),(0,o.jsx)(j.A,{xs:12,md:9,children:n?(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)(u.A,{animation:"border"})}):s?(0,o.jsx)("div",{className:"text-danger text-center",children:s}):f.length>0?(0,o.jsx)("div",{className:"d-flex flex-wrap justify-content-between",children:f.map(((e,t)=>(0,o.jsx)(x,{product:e},t)))}):(0,o.jsx)("div",{className:"text-center",children:"No products found."})})]})})};const w=function(){return(0,o.jsx)("div",{className:"container mt-4",children:(0,o.jsx)(f,{})})}}}]);
//# sourceMappingURL=96.3dff3bde.chunk.js.map